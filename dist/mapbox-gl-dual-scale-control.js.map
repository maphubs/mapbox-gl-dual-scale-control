{"version":3,"sources":["node_modules/browser-pack/_prelude.js","node_modules/@mapbox/unitbezier/index.js","node_modules/mapbox-gl/src/geo/coordinate.js","node_modules/mapbox-gl/src/util/browser/window.js","node_modules/mapbox-gl/src/util/dom.js","node_modules/mapbox-gl/src/util/util.js","node_modules/point-geometry/index.js","src/index.js"],"names":["UnitBezier","p1x","p1y","p2x","p2y","this","cx","bx","ax","cy","by","ay","module","exports","prototype","sampleCurveX","t","sampleCurveY","sampleCurveDerivativeX","solveCurveX","x","epsilon","t0","t1","t2","x2","i","Math","abs","d2","solve","Coordinate","column","row","zoom","clone","zoomTo","_zoomTo","sub","c","_sub","scale","pow","self","testProp","props","let","length","docStyle","suppressClick","e","preventDefault","stopPropagation","window","removeEventListener","const","Point","require","create","tagName","className","container","el","document","createElement","appendChild","documentElement","style","selectProp","userSelect","disableDrag","enableDrag","transformProp","setTransform","value","addEventListener","setTimeout","mousePos","rect","getBoundingClientRect","touches","clientX","left","clientLeft","clientY","top","clientTop","touchPos","points","type","changedTouches","push","remove","node","parentNode","removeChild","easeCubicInOut","t3","bezier","ease","clamp","n","min","max","wrap","d","w","asyncAll","array","fn","callback","remaining","results","Array","error","forEach","item","err","result","values","obj","k","keysDifference","other","difference","extend","dest","source0","source1","source2","arguments$1","arguments","src","pick","properties","id","uniqueId","bindAll","fns","context","bind","getCoordinatesCenter","coords","minX","Infinity","minY","maxX","maxY","dx","dy","dMax","floor","log","LN2","endsWith","string","suffix","indexOf","mapObject","input","iterator","this$1","output","key","call","filterObject","deepEqual","a","b","isArray","Object","keys","map","arraysIntersect","l","warnOnceHistory","warnOnce","message","console","warn","isCounterClockwise","y","calculateSignedArea","ring","sum","len","j","p1","p2","isClosedPolygon","sphericalToCartesian","spherical","r","azimuthal","polar","PI","cos","sin","parseCacheControl","cacheControl","header","replace","$0","$1","$2","$3","toLowerCase","maxAge","parseInt","isNaN","add","p","_add","mult","_mult","div","_div","rotate","_rotate","matMult","m","_matMult","unit","_unit","perp","_perp","round","_round","mag","sqrt","equals","dist","distSqr","angle","atan2","angleTo","angleWith","angleWithSep","convert","updatePosition","lngLat","lat","toPrecision","lng","innerHTML","updateScale","metricContainer","imperialContainer","options","maxWidth","_container","clientHeight","maxMeters","getDistance","unproject","maxFeet","setScale","maxDistance","distance","getRoundNum","ratio","width","latlng1","latlng2","rad","lat1","lat2","acos","num","pow10","DOM","util","DualScaleControl","getDefaultPosition","_onMove","_map","_metricContainer","_imperialContainer","_onMouseMove","_positionContainer","onAdd","getContainer","on","onRemove","off","undefined"],"mappings":"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","file":"bundle.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","/*\n * Copyright (C) 2008 Apple Inc. All Rights Reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions\n * are met:\n * 1. Redistributions of source code must retain the above copyright\n *    notice, this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright\n *    notice, this list of conditions and the following disclaimer in the\n *    documentation and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY APPLE INC. ``AS IS'' AND ANY\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR\n * PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL APPLE INC. OR\n * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,\n * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,\n * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY\n * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * Ported from Webkit\n * http://svn.webkit.org/repository/webkit/trunk/Source/WebCore/platform/graphics/UnitBezier.h\n */\n\nmodule.exports = UnitBezier;\n\nfunction UnitBezier(p1x, p1y, p2x, p2y) {\n    // Calculate the polynomial coefficients, implicit first and last control points are (0,0) and (1,1).\n    this.cx = 3.0 * p1x;\n    this.bx = 3.0 * (p2x - p1x) - this.cx;\n    this.ax = 1.0 - this.cx - this.bx;\n\n    this.cy = 3.0 * p1y;\n    this.by = 3.0 * (p2y - p1y) - this.cy;\n    this.ay = 1.0 - this.cy - this.by;\n\n    this.p1x = p1x;\n    this.p1y = p2y;\n    this.p2x = p2x;\n    this.p2y = p2y;\n}\n\nUnitBezier.prototype.sampleCurveX = function(t) {\n    // `ax t^3 + bx t^2 + cx t' expanded using Horner's rule.\n    return ((this.ax * t + this.bx) * t + this.cx) * t;\n};\n\nUnitBezier.prototype.sampleCurveY = function(t) {\n    return ((this.ay * t + this.by) * t + this.cy) * t;\n};\n\nUnitBezier.prototype.sampleCurveDerivativeX = function(t) {\n    return (3.0 * this.ax * t + 2.0 * this.bx) * t + this.cx;\n};\n\nUnitBezier.prototype.solveCurveX = function(x, epsilon) {\n    if (typeof epsilon === 'undefined') epsilon = 1e-6;\n\n    var t0, t1, t2, x2, i;\n\n    // First try a few iterations of Newton's method -- normally very fast.\n    for (t2 = x, i = 0; i < 8; i++) {\n\n        x2 = this.sampleCurveX(t2) - x;\n        if (Math.abs(x2) < epsilon) return t2;\n\n        var d2 = this.sampleCurveDerivativeX(t2);\n        if (Math.abs(d2) < 1e-6) break;\n\n        t2 = t2 - x2 / d2;\n    }\n\n    // Fall back to the bisection method for reliability.\n    t0 = 0.0;\n    t1 = 1.0;\n    t2 = x;\n\n    if (t2 < t0) return t0;\n    if (t2 > t1) return t1;\n\n    while (t0 < t1) {\n\n        x2 = this.sampleCurveX(t2);\n        if (Math.abs(x2 - x) < epsilon) return t2;\n\n        if (x > x2) {\n            t0 = t2;\n        } else {\n            t1 = t2;\n        }\n\n        t2 = (t1 - t0) * 0.5 + t0;\n    }\n\n    // Failure.\n    return t2;\n};\n\nUnitBezier.prototype.solve = function(x, epsilon) {\n    return this.sampleCurveY(this.solveCurveX(x, epsilon));\n};\n","'use strict';\n//      \n\n/**\n * A coordinate is a column, row, zoom combination, often used\n * as the data component of a tile.\n *\n * @param {number} column\n * @param {number} row\n * @param {number} zoom\n * @private\n */\nclass Coordinate {\n                   \n                \n                 \n    constructor(column        , row        , zoom        ) {\n        this.column = column;\n        this.row = row;\n        this.zoom = zoom;\n    }\n\n    /**\n     * Create a clone of this coordinate that can be mutated without\n     * changing the original coordinate\n     *\n     * @returns {Coordinate} clone\n     * @private\n     * var coord = new Coordinate(0, 0, 0);\n     * var c2 = coord.clone();\n     * // since coord is cloned, modifying a property of c2 does\n     * // not modify it.\n     * c2.zoom = 2;\n     */\n    clone() {\n        return new Coordinate(this.column, this.row, this.zoom);\n    }\n\n    /**\n     * Zoom this coordinate to a given zoom level. This returns a new\n     * coordinate object, not mutating the old one.\n     *\n     * @param {number} zoom\n     * @returns {Coordinate} zoomed coordinate\n     * @private\n     * @example\n     * var coord = new Coordinate(0, 0, 0);\n     * var c2 = coord.zoomTo(1);\n     * c2 // equals new Coordinate(0, 0, 1);\n     */\n    zoomTo(zoom        ) { return this.clone()._zoomTo(zoom); }\n\n    /**\n     * Subtract the column and row values of this coordinate from those\n     * of another coordinate. The other coordinat will be zoomed to the\n     * same level as `this` before the subtraction occurs\n     *\n     * @param {Coordinate} c other coordinate\n     * @returns {Coordinate} result\n     * @private\n     */\n    sub(c            ) { return this.clone()._sub(c); }\n\n    _zoomTo(zoom        ) {\n        const scale = Math.pow(2, zoom - this.zoom);\n        this.column *= scale;\n        this.row *= scale;\n        this.zoom = zoom;\n        return this;\n    }\n\n    _sub(c            ) {\n        c = c.zoomTo(this.zoom);\n        this.column -= c.column;\n        this.row -= c.row;\n        return this;\n    }\n}\n\nmodule.exports = Coordinate;\n","'use strict';\n\n/* eslint-env browser */\nmodule.exports = self;\n","'use strict';\n\nconst Point = require('point-geometry');\nconst window = require('./window');\n\nexports.create = function (tagName, className, container) {\n    const el = window.document.createElement(tagName);\n    if (className) el.className = className;\n    if (container) container.appendChild(el);\n    return el;\n};\n\nconst docStyle = window.document.documentElement.style;\n\nfunction testProp(props) {\n    for (let i = 0; i < props.length; i++) {\n        if (props[i] in docStyle) {\n            return props[i];\n        }\n    }\n    return props[0];\n}\n\nconst selectProp = testProp(['userSelect', 'MozUserSelect', 'WebkitUserSelect', 'msUserSelect']);\nlet userSelect;\nexports.disableDrag = function () {\n    if (selectProp) {\n        userSelect = docStyle[selectProp];\n        docStyle[selectProp] = 'none';\n    }\n};\nexports.enableDrag = function () {\n    if (selectProp) {\n        docStyle[selectProp] = userSelect;\n    }\n};\n\nconst transformProp = testProp(['transform', 'WebkitTransform']);\nexports.setTransform = function(el, value) {\n    el.style[transformProp] = value;\n};\n\n// Suppress the next click, but only if it's immediate.\nfunction suppressClick(e) {\n    e.preventDefault();\n    e.stopPropagation();\n    window.removeEventListener('click', suppressClick, true);\n}\nexports.suppressClick = function() {\n    window.addEventListener('click', suppressClick, true);\n    window.setTimeout(() => {\n        window.removeEventListener('click', suppressClick, true);\n    }, 0);\n};\n\nexports.mousePos = function (el, e) {\n    const rect = el.getBoundingClientRect();\n    e = e.touches ? e.touches[0] : e;\n    return new Point(\n        e.clientX - rect.left - el.clientLeft,\n        e.clientY - rect.top - el.clientTop\n    );\n};\n\nexports.touchPos = function (el, e) {\n    const rect = el.getBoundingClientRect(),\n        points = [];\n    const touches = (e.type === 'touchend') ? e.changedTouches : e.touches;\n    for (let i = 0; i < touches.length; i++) {\n        points.push(new Point(\n            touches[i].clientX - rect.left - el.clientLeft,\n            touches[i].clientY - rect.top - el.clientTop\n        ));\n    }\n    return points;\n};\n\nexports.remove = function(node) {\n    if (node.parentNode) {\n        node.parentNode.removeChild(node);\n    }\n};\n","'use strict';\n//      \n\nconst UnitBezier = require('@mapbox/unitbezier');\nconst Coordinate = require('../geo/coordinate');\nconst Point = require('point-geometry');\n\n/**\n * Given a value `t` that varies between 0 and 1, return\n * an interpolation function that eases between 0 and 1 in a pleasing\n * cubic in-out fashion.\n *\n * @private\n */\nexports.easeCubicInOut = function(t        )         {\n    if (t <= 0) return 0;\n    if (t >= 1) return 1;\n    const t2 = t * t,\n        t3 = t2 * t;\n    return 4 * (t < 0.5 ? t3 : 3 * (t - t2) + t3 - 0.75);\n};\n\n/**\n * Given given (x, y), (x1, y1) control points for a bezier curve,\n * return a function that interpolates along that curve.\n *\n * @param p1x control point 1 x coordinate\n * @param p1y control point 1 y coordinate\n * @param p2x control point 2 x coordinate\n * @param p2y control point 2 y coordinate\n * @private\n */\nexports.bezier = function(p1x        , p1y        , p2x        , p2y        )                        {\n    const bezier = new UnitBezier(p1x, p1y, p2x, p2y);\n    return function(t        ) {\n        return bezier.solve(t);\n    };\n};\n\n/**\n * A default bezier-curve powered easing function with\n * control points (0.25, 0.1) and (0.25, 1)\n *\n * @private\n */\nexports.ease = exports.bezier(0.25, 0.1, 0.25, 1);\n\n/**\n * constrain n to the given range via min + max\n *\n * @param n value\n * @param min the minimum value to be returned\n * @param max the maximum value to be returned\n * @returns the clamped value\n * @private\n */\nexports.clamp = function (n        , min        , max        )         {\n    return Math.min(max, Math.max(min, n));\n};\n\n/**\n * constrain n to the given range, excluding the minimum, via modular arithmetic\n *\n * @param n value\n * @param min the minimum value to be returned, exclusive\n * @param max the maximum value to be returned, inclusive\n * @returns constrained number\n * @private\n */\nexports.wrap = function (n        , min        , max        )         {\n    const d = max - min;\n    const w = ((n - min) % d + d) % d + min;\n    return (w === min) ? max : w;\n};\n\n/*\n * Call an asynchronous function on an array of arguments,\n * calling `callback` with the completed results of all calls.\n *\n * @param array input to each call of the async function.\n * @param fn an async function with signature (data, callback)\n * @param callback a callback run after all async work is done.\n * called with an array, containing the results of each async call.\n * @private\n */\nexports.asyncAll = function (array            , fn          , callback          ) {\n    if (!array.length) { return callback(null, []); }\n    let remaining = array.length;\n    const results = new Array(array.length);\n    let error = null;\n    array.forEach((item, i) => {\n        fn(item, (err, result) => {\n            if (err) error = err;\n            results[i] = result;\n            if (--remaining === 0) callback(error, results);\n        });\n    });\n};\n\n/*\n * Polyfill for Object.values. Not fully spec compliant, but we don't\n * need it to be.\n *\n * @private\n */\nexports.values = function (obj        )                {\n    const result = [];\n    for (const k in obj) {\n        result.push(obj[k]);\n    }\n    return result;\n};\n\n/*\n * Compute the difference between the keys in one object and the keys\n * in another object.\n *\n * @returns keys difference\n * @private\n */\nexports.keysDifference = function (obj        , other        )                {\n    const difference = [];\n    for (const i in obj) {\n        if (!(i in other)) {\n            difference.push(i);\n        }\n    }\n    return difference;\n};\n\n/**\n * Given a destination object and optionally many source objects,\n * copy all properties from the source objects into the destination.\n * The last source object given overrides properties from previous\n * source objects.\n *\n * @param dest destination object\n * @param {...Object} sources sources from which properties are pulled\n * @private\n */\n// eslint-disable-next-line no-unused-vars\nexports.extend = function (dest        , source0        , source1         , source2         )         {\n    for (let i = 1; i < arguments.length; i++) {\n        const src = arguments[i];\n        for (const k in src) {\n            dest[k] = src[k];\n        }\n    }\n    return dest;\n};\n\n/**\n * Given an object and a number of properties as strings, return version\n * of that object with only those properties.\n *\n * @param src the object\n * @param properties an array of property names chosen\n * to appear on the resulting object.\n * @returns object with limited properties.\n * @example\n * var foo = { name: 'Charlie', age: 10 };\n * var justName = pick(foo, ['name']);\n * // justName = { name: 'Charlie' }\n * @private\n */\nexports.pick = function (src        , properties               )         {\n    const result = {};\n    for (let i = 0; i < properties.length; i++) {\n        const k = properties[i];\n        if (k in src) {\n            result[k] = src[k];\n        }\n    }\n    return result;\n};\n\nlet id = 1;\n\n/**\n * Return a unique numeric id, starting at 1 and incrementing with\n * each call.\n *\n * @returns unique numeric id.\n * @private\n */\nexports.uniqueId = function ()         {\n    return id++;\n};\n\n/**\n * Given an array of member function names as strings, replace all of them\n * with bound versions that will always refer to `context` as `this`. This\n * is useful for classes where otherwise event bindings would reassign\n * `this` to the evented object or some other value: this lets you ensure\n * the `this` value always.\n *\n * @param fns list of member function names\n * @param context the context value\n * @example\n * function MyClass() {\n *   bindAll(['ontimer'], this);\n *   this.name = 'Tom';\n * }\n * MyClass.prototype.ontimer = function() {\n *   alert(this.name);\n * };\n * var myClass = new MyClass();\n * setTimeout(myClass.ontimer, 100);\n * @private\n */\nexports.bindAll = function(fns               , context        )       {\n    fns.forEach((fn) => {\n        if (!context[fn]) { return; }\n        context[fn] = context[fn].bind(context);\n    });\n};\n\n/**\n * Given a list of coordinates, get their center as a coordinate.\n *\n * @returns centerpoint\n * @private\n */\nexports.getCoordinatesCenter = function(coords                   )             {\n    let minX = Infinity;\n    let minY = Infinity;\n    let maxX = -Infinity;\n    let maxY = -Infinity;\n\n    for (let i = 0; i < coords.length; i++) {\n        minX = Math.min(minX, coords[i].column);\n        minY = Math.min(minY, coords[i].row);\n        maxX = Math.max(maxX, coords[i].column);\n        maxY = Math.max(maxY, coords[i].row);\n    }\n\n    const dx = maxX - minX;\n    const dy = maxY - minY;\n    const dMax = Math.max(dx, dy);\n    const zoom = Math.max(0, Math.floor(-Math.log(dMax) / Math.LN2));\n    return new Coordinate((minX + maxX) / 2, (minY + maxY) / 2, 0)\n        .zoomTo(zoom);\n};\n\n/**\n * Determine if a string ends with a particular substring\n *\n * @private\n */\nexports.endsWith = function(string        , suffix        )          {\n    return string.indexOf(suffix, string.length - suffix.length) !== -1;\n};\n\n/**\n * Create an object by mapping all the values of an existing object while\n * preserving their keys.\n *\n * @private\n */\nexports.mapObject = function(input        , iterator          , context         )         {\n    const output = {};\n    for (const key in input) {\n        output[key] = iterator.call(context || this, input[key], key, input);\n    }\n    return output;\n};\n\n/**\n * Create an object by filtering out values of an existing object.\n *\n * @private\n */\nexports.filterObject = function(input        , iterator          , context         )         {\n    const output = {};\n    for (const key in input) {\n        if (iterator.call(context || this, input[key], key, input)) {\n            output[key] = input[key];\n        }\n    }\n    return output;\n};\n\n/**\n * Deeply compares two object literals.\n *\n * @private\n */\nexports.deepEqual = function(a        , b        )          {\n    if (Array.isArray(a)) {\n        if (!Array.isArray(b) || a.length !== b.length) return false;\n        for (let i = 0; i < a.length; i++) {\n            if (!exports.deepEqual(a[i], b[i])) return false;\n        }\n        return true;\n    }\n    if (typeof a === 'object' && a !== null && b !== null) {\n        if (!(typeof b === 'object')) return false;\n        const keys = Object.keys(a);\n        if (keys.length !== Object.keys(b).length) return false;\n        for (const key in a) {\n            if (!exports.deepEqual(a[key], b[key])) return false;\n        }\n        return true;\n    }\n    return a === b;\n};\n\n/**\n * Deeply clones two objects.\n *\n * @private\n */\nexports.clone = function   (input   )    {\n    if (Array.isArray(input)) {\n        return input.map(exports.clone);\n    } else if (typeof input === 'object' && input) {\n        return ((exports.mapObject(input, exports.clone)     )   );\n    } else {\n        return input;\n    }\n};\n\n/**\n * Check if two arrays have at least one common element.\n *\n * @private\n */\nexports.arraysIntersect = function(a            , b            )          {\n    for (let l = 0; l < a.length; l++) {\n        if (b.indexOf(a[l]) >= 0) return true;\n    }\n    return false;\n};\n\n/**\n * Print a warning message to the console and ensure duplicate warning messages\n * are not printed.\n *\n * @private\n */\nconst warnOnceHistory = {};\nexports.warnOnce = function(message        )       {\n    if (!warnOnceHistory[message]) {\n        // console isn't defined in some WebWorkers, see #2558\n        if (typeof console !== \"undefined\") console.warn(message);\n        warnOnceHistory[message] = true;\n    }\n};\n\n/**\n * Indicates if the provided Points are in a counter clockwise (true) or clockwise (false) order\n *\n * @returns true for a counter clockwise set of points\n */\n// http://bryceboe.com/2006/10/23/line-segment-intersection-algorithm/\nexports.isCounterClockwise = function(a       , b       , c       )          {\n    return (c.y - a.y) * (b.x - a.x) > (b.y - a.y) * (c.x - a.x);\n};\n\n/**\n * Returns the signed area for the polygon ring.  Postive areas are exterior rings and\n * have a clockwise winding.  Negative areas are interior rings and have a counter clockwise\n * ordering.\n *\n * @param ring Exterior or interior ring\n */\nexports.calculateSignedArea = function(ring              )         {\n    let sum = 0;\n    for (let i = 0, len = ring.length, j = len - 1, p1, p2; i < len; j = i++) {\n        p1 = ring[i];\n        p2 = ring[j];\n        sum += (p2.x - p1.x) * (p1.y + p2.y);\n    }\n    return sum;\n};\n\n/**\n * Detects closed polygons, first + last point are equal\n *\n * @param points array of points\n * @return true if the points are a closed polygon\n */\nexports.isClosedPolygon = function(points              )          {\n    // If it is 2 points that are the same then it is a point\n    // If it is 3 points with start and end the same then it is a line\n    if (points.length < 4)\n        return false;\n\n    const p1 = points[0];\n    const p2 = points[points.length - 1];\n\n    if (Math.abs(p1.x - p2.x) > 0 ||\n        Math.abs(p1.y - p2.y) > 0) {\n        return false;\n    }\n\n    // polygon simplification can produce polygons with zero area and more than 3 points\n    return (Math.abs(exports.calculateSignedArea(points)) > 0.01);\n};\n\n/**\n * Converts spherical coordinates to cartesian coordinates.\n *\n * @param spherical Spherical coordinates, in [radial, azimuthal, polar]\n * @return cartesian coordinates in [x, y, z]\n */\n\nexports.sphericalToCartesian = function(spherical               )                {\n    const r = spherical[0];\n    let azimuthal = spherical[1],\n        polar = spherical[2];\n    // We abstract \"north\"/\"up\" (compass-wise) to be 0° when really this is 90° (π/2):\n    // correct for that here\n    azimuthal += 90;\n\n    // Convert azimuthal and polar angles to radians\n    azimuthal *= Math.PI / 180;\n    polar *= Math.PI / 180;\n\n    // spherical to cartesian (x, y, z)\n    return [\n        r * Math.cos(azimuthal) * Math.sin(polar),\n        r * Math.sin(azimuthal) * Math.sin(polar),\n        r * Math.cos(polar)\n    ];\n};\n\n/**\n * Parses data from 'Cache-Control' headers.\n *\n * @param cacheControl Value of 'Cache-Control' header\n * @return object containing parsed header info.\n */\n\nexports.parseCacheControl = function(cacheControl        )         {\n    // Taken from [Wreck](https://github.com/hapijs/wreck)\n    const re = /(?:^|(?:\\s*\\,\\s*))([^\\x00-\\x20\\(\\)<>@\\,;\\:\\\\\"\\/\\[\\]\\?\\=\\{\\}\\x7F]+)(?:\\=(?:([^\\x00-\\x20\\(\\)<>@\\,;\\:\\\\\"\\/\\[\\]\\?\\=\\{\\}\\x7F]+)|(?:\\\"((?:[^\"\\\\]|\\\\.)*)\\\")))?/g;\n\n    const header = {};\n    cacheControl.replace(re, ($0, $1, $2, $3) => {\n        const value = $2 || $3;\n        header[$1] = value ? value.toLowerCase() : true;\n        return '';\n    });\n\n    if (header['max-age']) {\n        const maxAge = parseInt(header['max-age'], 10);\n        if (isNaN(maxAge)) delete header['max-age'];\n        else header['max-age'] = maxAge;\n    }\n\n    return header;\n};\n","'use strict';\n\nmodule.exports = Point;\n\nfunction Point(x, y) {\n    this.x = x;\n    this.y = y;\n}\n\nPoint.prototype = {\n    clone: function() { return new Point(this.x, this.y); },\n\n    add:     function(p) { return this.clone()._add(p);     },\n    sub:     function(p) { return this.clone()._sub(p);     },\n    mult:    function(k) { return this.clone()._mult(k);    },\n    div:     function(k) { return this.clone()._div(k);     },\n    rotate:  function(a) { return this.clone()._rotate(a);  },\n    matMult: function(m) { return this.clone()._matMult(m); },\n    unit:    function() { return this.clone()._unit(); },\n    perp:    function() { return this.clone()._perp(); },\n    round:   function() { return this.clone()._round(); },\n\n    mag: function() {\n        return Math.sqrt(this.x * this.x + this.y * this.y);\n    },\n\n    equals: function(p) {\n        return this.x === p.x &&\n               this.y === p.y;\n    },\n\n    dist: function(p) {\n        return Math.sqrt(this.distSqr(p));\n    },\n\n    distSqr: function(p) {\n        var dx = p.x - this.x,\n            dy = p.y - this.y;\n        return dx * dx + dy * dy;\n    },\n\n    angle: function() {\n        return Math.atan2(this.y, this.x);\n    },\n\n    angleTo: function(b) {\n        return Math.atan2(this.y - b.y, this.x - b.x);\n    },\n\n    angleWith: function(b) {\n        return this.angleWithSep(b.x, b.y);\n    },\n\n    // Find the angle of the two vectors, solving the formula for the cross product a x b = |a||b|sin(θ) for θ.\n    angleWithSep: function(x, y) {\n        return Math.atan2(\n            this.x * y - this.y * x,\n            this.x * x + this.y * y);\n    },\n\n    _matMult: function(m) {\n        var x = m[0] * this.x + m[1] * this.y,\n            y = m[2] * this.x + m[3] * this.y;\n        this.x = x;\n        this.y = y;\n        return this;\n    },\n\n    _add: function(p) {\n        this.x += p.x;\n        this.y += p.y;\n        return this;\n    },\n\n    _sub: function(p) {\n        this.x -= p.x;\n        this.y -= p.y;\n        return this;\n    },\n\n    _mult: function(k) {\n        this.x *= k;\n        this.y *= k;\n        return this;\n    },\n\n    _div: function(k) {\n        this.x /= k;\n        this.y /= k;\n        return this;\n    },\n\n    _unit: function() {\n        this._div(this.mag());\n        return this;\n    },\n\n    _perp: function() {\n        var y = this.y;\n        this.y = this.x;\n        this.x = -y;\n        return this;\n    },\n\n    _rotate: function(angle) {\n        var cos = Math.cos(angle),\n            sin = Math.sin(angle),\n            x = cos * this.x - sin * this.y,\n            y = sin * this.x + cos * this.y;\n        this.x = x;\n        this.y = y;\n        return this;\n    },\n\n    _round: function() {\n        this.x = Math.round(this.x);\n        this.y = Math.round(this.y);\n        return this;\n    }\n};\n\n// constructs Point from an array if necessary\nPoint.convert = function (a) {\n    if (a instanceof Point) {\n        return a;\n    }\n    if (Array.isArray(a)) {\n        return new Point(a[0], a[1]);\n    }\n    return a;\n};\n","//adapted from https://github.com/mapbox/mapbox-gl-js/blob/061fdb514a33cf9b2b542a1c7bd433c166da917e/src/ui/control/scale_control.js#L19-L52\n\n'use strict';\n\nconst DOM = require('mapbox-gl/src/util/dom');\nconst util = require('mapbox-gl/src/util/util');\n\n/**\n * A `ScaleControl` control displays the ratio of a distance on the map to the corresponding distance on the ground.\n *\n * @implements {IControl}\n * @param {Object} [options]\n * @param {number} [options.maxWidth='150'] The maximum length of the scale control in pixels.\n * @example\n * map.addControl(new ScaleControl({\n *     maxWidth: 80\n * }));\n */\n class DualScaleControl {\n\n    constructor(options) {\n        this.options = options;\n\n        util.bindAll([\n            '_onMove', '_onMouseMove'\n        ], this);\n    }\n\n    getDefaultPosition() {\n        return 'bottom-left';\n    }\n\n    _onMove() {\n        updateScale(this._map, this._metricContainer, this._imperialContainer, this.options);\n    }\n\n    _onMouseMove(e) {\n        updatePosition(this._map, this._positionContainer, e.lngLat);\n    }\n\n    onAdd(map) {\n        this._map = map;\n        this._container = DOM.create('div', 'mapboxgl-ctrl mapboxgl-ctrl-scale maphubs-ctrl-scale', map.getContainer());\n        this._positionContainer = DOM.create('div', 'map-position', this._container);\n        this._metricContainer = DOM.create('div', 'metric-scale', this._container);\n        this._imperialContainer = DOM.create('div', 'imperial-scale', this._container);\n\n        this._map.on('move', this._onMove);\n        this._onMove();\n\n        this._map.on('mousemove', this._onMouseMove);\n        //this._onMouseMove(this._map.getCenter()); //start at center\n\n        return this._container;\n    }\n\n    onRemove() {\n        this._container.parentNode.removeChild(this._container);\n        this._map.off('move', this._onMove);\n        this._map.off('mousemove', this._onMouseMove);\n        this._map = undefined;\n    }\n}\n\nmodule.exports = DualScaleControl;\n\n\nfunction updatePosition(map, container, lngLat) {\n  const lat = lngLat.lat.toPrecision(4);\n  const lng = lngLat.lng.toPrecision(4);\n  container.innerHTML = `${lat}, ${lng}`;\n}\n\nfunction updateScale(map, metricContainer, imperialContainer, options) {\n    // A horizontal scale is imagined to be present at center of the map\n    // container with maximum length (Default) as 100px.\n    // Using spherical law of cosines approximation, the real distance is\n    // found between the two coordinates.\n    const maxWidth = options && options.maxWidth || 100;\n\n    const y = map._container.clientHeight / 2;\n    const maxMeters = getDistance(map.unproject([0, y]), map.unproject([maxWidth, y]));\n    // The real distance corresponding to 100px scale length is rounded off to\n    // near pretty number and the scale length for the same is found out.\n    // Default unit of the scale is based on User's locale.\n     const maxFeet = 3.2808 * maxMeters;\n    if (maxFeet > 5280) {\n      const maxMiles = maxFeet / 5280;\n      setScale(imperialContainer, maxWidth, maxMiles, 'mi');\n    } else {\n      setScale(imperialContainer, maxWidth, maxFeet, 'ft');\n    }\n    setScale(metricContainer, maxWidth, maxMeters, 'm');\n\n}\n\nfunction setScale(container, maxWidth, maxDistance, unit) {\n    let distance = getRoundNum(maxDistance);\n    const ratio = distance / maxDistance;\n\n    if (unit === 'm' && distance >= 1000) {\n        distance = distance / 1000;\n        unit = 'km';\n    }\n\n    container.style.width = `${maxWidth * ratio}px`;\n    container.innerHTML = distance + unit;\n}\n\nfunction getDistance(latlng1, latlng2) {\n    // Uses spherical law of cosines approximation.\n    const R = 6371000;\n\n    const rad = Math.PI / 180,\n        lat1 = latlng1.lat * rad,\n        lat2 = latlng2.lat * rad,\n        a = Math.sin(lat1) * Math.sin(lat2) +\n          Math.cos(lat1) * Math.cos(lat2) * Math.cos((latlng2.lng - latlng1.lng) * rad);\n\n    const maxMeters = R * Math.acos(Math.min(a, 1));\n    return maxMeters;\n\n}\n\nfunction getRoundNum(num) {\n    const pow10 = Math.pow(10, (`${Math.floor(num)}`).length - 1);\n    let d = num / pow10;\n\n    d = d >= 10 ? 10 :\n        d >= 5 ? 5 :\n        d >= 3 ? 3 :\n        d >= 2 ? 2 : 1;\n\n    return pow10 * d;\n}"]}